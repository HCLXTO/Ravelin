# Ravelin challenge
Tech challenge for Henrique Calixto: Go+Javascript

## Building and running the server:
- On this readMe I'm assuming you cloned this repo on this folder:
     $GOPATH/github.com/HCLXTO

  If you did so, please follow the rest of the instructions, if
  not, please remember to alter the path on line 8 of the 
  '/server/server.go' file to reflect your current folder structure 

 - On the Ravelin folder, open the command line and run:

   ```go install monitor/monitor.go```

   ```cd server```
   
   ```go build server.go```
   
   ```./server```

   The server will be running on http://localhost:8080/

   To stop it press ```ctrl+c```

## Structure:
 - On the server folder we have:
    - server.go - a Go program that runs a server on port 8080, it serves index.html and register the monitoring events
    - static folder with the HTML a js files we will serve:
       - index.html - the provided HTML file
       - monitor.js - the js resposible for reporting the monitoring events to the server

 - On the monitor folder we have:
    - monitor.go - a package that register and report the monitored events
    - monitor_test.go - unit tests for the monitor package

## Coments:
 - On the front end we have the monitor.js file that capture and send to the server the following events:
    - screen resize
    - copy & paste
    - time taken to form submit

    Here I'm assuming that the session Id is generated by a part of the system outside of the scope of this tech challenge, so I'm generating a random session Id to be used for the development of the rest of the program.

 - The backend consist of server.go, responsible for serving the static index.html and acepting the monitored events from monitor.js, and monitor.go, responsible for processing and storing the monitored events.

   To store the events I created a map, that used the session id as the key, to store the Data structs in memory, on a bigger scale it would be advisable to use a database for this task, but I judged that it would be outside the scope of this tech challenge.

   On the monitor.go file I have a function "finalizeSession" that is called when the form is submited, on a real context this function would report the Data to another part of the system, but in the context of this tech challenge I'm only deleting the Data from the map

   For the hash function I implemented the djb2 hashing algorithm source: http://www.cse.yorku.ca/~oz/hash.html, and I'm using it in the Data's Print function.


